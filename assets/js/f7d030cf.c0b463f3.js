"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[436],{2353:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>a});var s=i(5893),r=i(1151);const l={},t=void 0,o={id:"Prerequisites",title:"Prerequisites",description:"Prerequisites",source:"@site/Prerequisites.md",sourceDirName:".",slug:"/Prerequisites",permalink:"/Prerequisites",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tezosK8sSidebar",previous:{title:"Overview",permalink:"/"},next:{title:"Public network node",permalink:"/Public-Node"}},c={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"For local deployment",id:"for-local-deployment",level:3},{value:"For deployment on a cloud platform (AWS)",id:"for-deployment-on-a-cloud-platform-aws",level:3},{value:"Installing prerequisites",id:"installing-prerequisites",level:2},{value:"Mac",id:"mac",level:3},{value:"Arch Linux",id:"arch-linux",level:3},{value:"Other Operating Systems",id:"other-operating-systems",level:3},{value:"Configuring Minikube",id:"configuring-minikube",level:2},{value:"Mac",id:"mac-1",level:3},{value:"Other Operating Systems",id:"other-operating-systems-1",level:3},{value:"Starting Minikube",id:"starting-minikube",level:2},{value:"Adding the Tacoinfra Helm Chart Repository",id:"adding-the-tacoinfra-helm-chart-repository",level:2},{value:"Using a custom Octez build",id:"using-a-custom-octez-build",level:2},{value:"Notes",id:"notes",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"python3 (>=3.7)"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/get-docker/",children:"docker"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/kubectl/",children:"kubectl"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://helm.sh/",children:"helm"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"for-local-deployment",children:"For local deployment"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/",children:"minikube"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"for-deployment-on-a-cloud-platform-aws",children:"For deployment on a cloud platform (AWS)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["we recommend ",(0,s.jsx)(n.a,{href:"https://www.pulumi.com/docs/get-started/install/",children:"pulumi"}),", an infrastructure-as-code platform, for cloud deployments"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installing-prerequisites",children:"Installing prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"This section varies depending on OS."}),"\n",(0,s.jsx)(n.h3,{id:"mac",children:"Mac"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Install ",(0,s.jsx)(n.a,{href:"https://docs.docker.com/docker-for-mac/install/",children:"Docker Desktop"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Start Docker Desktop and follow the setup instructions. Note: You may quit Docker after it has finished setting up. It is not required that Docker Desktop is running for you to run a Tezos chain."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Install ",(0,s.jsx)(n.a,{href:"https://brew.sh/",children:"homebrew"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Install other prerequisites:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"brew install python3 kubectl minikube helm\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"arch-linux",children:"Arch Linux"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"pacman -Syu && pacman -S docker python3 minikube kubectl kubectx helm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"other-operating-systems",children:"Other Operating Systems"}),"\n",(0,s.jsx)(n.p,{children:"Please see the respective pages for installation instructions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.python.org/downloads/",children:"python3"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/get-docker/",children:"docker"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/",children:"kubectl"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/start/",children:"minikube"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"helm"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuring-minikube",children:"Configuring Minikube"}),"\n",(0,s.jsxs)(n.p,{children:["It is suggested to deploy minikube as a virtual machine. This requires a virtual machine ",(0,s.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/drivers/",children:"driver"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"mac-1",children:"Mac"}),"\n",(0,s.jsxs)(n.p,{children:["Requires the ",(0,s.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/drivers/hyperkit/",children:"hyperkit"})," driver. This comes already bundled together with Docker Desktop."]}),"\n",(0,s.jsx)(n.p,{children:"Make hyperkit the default minikube driver:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"minikube config set driver hyperkit\n"})}),"\n",(0,s.jsx)(n.h3,{id:"other-operating-systems-1",children:"Other Operating Systems"}),"\n",(0,s.jsxs)(n.p,{children:["If in the next step minikube does not start correctly, you may need to configure a different driver for it. Please see the minikube docs ",(0,s.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/drivers/",children:"here"})," for more information."]}),"\n",(0,s.jsx)(n.h2,{id:"starting-minikube",children:"Starting Minikube"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"minikube start\n"})}),"\n",(0,s.jsx)(n.p,{children:"Configure your shell environment to use minikube\u2019s Docker daemon:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"eval $(minikube docker-env)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This allows you to run Docker commands inside of minikube. For example: ",(0,s.jsx)(n.code,{children:"docker images"})," to view the images that minikube has."]}),"\n",(0,s.jsx)(n.p,{children:"If you want to unset your shell from using minikube's docker daemon:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"eval $(minikube docker-env -u)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"adding-the-tacoinfra-helm-chart-repository",children:"Adding the Tacoinfra Helm Chart Repository"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"helm repo add tacoinfra https://tacoinfra.github.io/tezos-helm-charts/\n"})}),"\n",(0,s.jsx)(n.h2,{id:"using-a-custom-octez-build",children:"Using a custom Octez build"}),"\n",(0,s.jsxs)(n.p,{children:["Create a clone of the ",(0,s.jsx)(n.a,{href:"https://gitlab.com/tezos/tezos",children:"Octez"}),"\nrepository.  ",(0,s.jsx)(n.a,{href:"https://tezos.gitlab.io/introduction/howtoget.html#setting-up-the-development-environment-from-scratch",children:"Set up your development environment as usual"}),".  Then run:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"eval $(minikube docker-env)\nmake docker-image\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will create a docker image called ",(0,s.jsx)(n.code,{children:"tezos:latest"})," and install it\ninto the minikube environment."]}),"\n",(0,s.jsx)(n.p,{children:"Or, if you prefer, you can build the image using:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"./scripts/create_docker_image.sh\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will create an image with a name like ",(0,s.jsx)(n.code,{children:"tezos/tezos:v16.0"}),".\nThen you install it thus:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"docker image save <image> | ( eval $(minikube docker-env); docker image load )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Either way, inside ",(0,s.jsx)(n.code,{children:"$CHAIN_NAME_values.yaml"}),", change the ",(0,s.jsx)(n.code,{children:"images"})," section to:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"images:\n  octez: <image>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["where the image is ",(0,s.jsx)(n.code,{children:"tezos:latest"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Then install the chart as above."}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["We recommend using a very nice GUI for your k8s Tezos chain infrastructure called ",(0,s.jsx)(n.a,{href:"https://k8slens.dev/",children:"Lens"}),". This allows you to easily see all of the k8s resources that have been spun up as well as to view the logs for your Tezos nodes. Checkout a similar tool called ",(0,s.jsx)(n.a,{href:"https://k9scli.io/",children:"k9s"})," that works in the CLI."]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>t});var s=i(7294);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);